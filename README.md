# ğŸµ Rhythmix

<div align="center">

![Version](https://img.shields.io/badge/ç‰ˆæœ¬-1.0.0-blue)
![License](https://img.shields.io/badge/è®¸å¯è¯-MIT-green)

</div>

> **Rhythmix**ï¼ˆå¯ä»¥ç†è§£ä¸º"èŠ‚å¥æ··åˆ"ï¼‰æ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æµæ•°æ®å¤„ç†è§„åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚å®ƒèƒ½å¤Ÿåœ¨æµæ•°æ®ä¸­æ‰¾å‡ºç¬¦åˆç‰¹å®šè§„å¾‹ï¼ˆèŠ‚å¥ï¼‰çš„æ•°æ®ï¼Œå°±åƒæŒ‰ç…§æŸç§èŠ‚å¥è¿ä½œä¸€æ ·ã€‚

## ğŸ“‘ ç›®å½•

- [ğŸµ Rhythmix](#-rhythmix)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ğŸš€ é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
  - [ğŸ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
    - [åŸºæœ¬ç¤ºä¾‹](#åŸºæœ¬ç¤ºä¾‹)
    - [çŠ¶æ€è½¬æ¢ç¤ºä¾‹](#çŠ¶æ€è½¬æ¢ç¤ºä¾‹)
  - [ğŸ“ è¡¨è¾¾å¼è¯­æ³•](#-è¡¨è¾¾å¼è¯­æ³•)
    - [ç®­å¤´è¡¨è¾¾å¼](#ç®­å¤´è¡¨è¾¾å¼)
    - [çŠ¶æ€è¡¨è¾¾å¼](#çŠ¶æ€è¡¨è¾¾å¼)
      - [æ¯”è¾ƒè¡¨è¾¾å¼](#æ¯”è¾ƒè¡¨è¾¾å¼)
      - [åŒºé—´è¡¨è¾¾å¼](#åŒºé—´è¡¨è¾¾å¼)
      - [é€»è¾‘è¡¨è¾¾å¼](#é€»è¾‘è¡¨è¾¾å¼)
    - [é“¾å¼è¡¨è¾¾å¼](#é“¾å¼è¡¨è¾¾å¼)
      - [æ•°æ®è¿‡æ»¤](#æ•°æ®è¿‡æ»¤)
      - [æ•°æ®é™åˆ¶](#æ•°æ®é™åˆ¶)
      - [æ•°æ®è®¡ç®—](#æ•°æ®è®¡ç®—)

## ğŸš€ é¡¹ç›®ç®€ä»‹

Rhythmix æ˜¯ä¸€ä¸ªä¸“ä¸ºæµæ•°æ®å¤„ç†è®¾è®¡çš„è§„åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚å®ƒå¯ä»¥åº”ç”¨äºå¤šç§åœºæ™¯ï¼Œç‰¹åˆ«é€‚åˆï¼š

- ç”Ÿäº§ç¯å¢ƒç›‘æ§
- å®æ—¶æ•°æ®åˆ†æ
- å¼‚å¸¸æ£€æµ‹ä¸æŠ¥è­¦
- ä¼ æ„Ÿå™¨æ•°æ®å¤„ç†

é€šè¿‡ç®€æ´è€Œå¼ºå¤§çš„è¡¨è¾¾å¼è¯­æ³•ï¼ŒRhythmix ä½¿å¤æ‚çš„æ•°æ®å¤„ç†è§„åˆ™å˜å¾—ç®€å•æ˜“ç”¨ã€‚

## ğŸ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Rhythmix

```js
count(>4,3)
```

è¿™è¡Œè¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼šå½“å€¼å¤§äº 4 å¹¶ä¸”æ»¡è¶³ 3 æ¬¡ï¼ˆéè¿ç»­ä¸‰æ¬¡ï¼‰ä¹‹åè¿”å›çœŸã€‚

![count1](doc/media/videos/300p60/count1.gif)

åœ¨ Java ä»£ç ä¸­ä½¿ç”¨è¯¥è¡¨è¾¾å¼ï¼š

```java
// ç¼–è¯‘è¡¨è¾¾å¼
String code = "count(>4,3)";
Executor exe = Compiler.compile(code);

// æ„é€ æµ‹è¯•æ•°æ®
SensorEvent p1 = Util.genEventData("11", "1", new Timestamp(System.currentTimeMillis()));
SensorEvent p2 = Util.genEventData("12", "11", new Timestamp(System.currentTimeMillis()+100));
SensorEvent p3 = Util.genEventData("13", "9", new Timestamp(System.currentTimeMillis()+200));

// æ‰§è¡Œè¡¨è¾¾å¼
boolean res = exe.execute(p1, p2);
```

### çŠ¶æ€è½¬æ¢ç¤ºä¾‹

æ£€æµ‹äº‹ä»¶å€¼ä» 0 å˜åŒ–åˆ° 1 çš„æƒ…å†µï¼š

```java
String code = "{==0}->{==1}";
Executor executor = Compiler.compile(code);
boolean res = executor.execute(eventData);
```

å¯¹äºç®€å•çš„ç­‰äºè¡¨è¾¾å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ›´ç®€æ´çš„è¯­æ³•ï¼š

```
<0,1>
```

ä¸€å¯¹å°–æ‹¬å·å†…çš„ 0 å’Œ 1 ç”¨é€—å·éš”å¼€ï¼Œè¡¨ç¤ºä» 0 å˜åŒ–åˆ° 1ã€‚

![state_transition_0_1](doc/media/videos/300p60/state_transition_enhanced.gif)

## ğŸ“ è¡¨è¾¾å¼è¯­æ³•

### ç®­å¤´è¡¨è¾¾å¼

ç®­å¤´è¡¨è¾¾å¼ç”¨äºè¡¨è¿°å¤šç§çŠ¶æ€çš„ä¾æ¬¡æ ¡éªŒã€‚è¯­æ³•å¦‚ä¸‹ï¼š

```
{çŠ¶æ€A}->{çŠ¶æ€B}->{çŠ¶æ€C}
```

èŠ±æ‹¬å· `{}` å†…æ˜¯æ‰€è¦è¡¨è¿°çš„çŠ¶æ€ï¼Œç®­å¤´ `->` è¡¨ç¤ºçŠ¶æ€çš„è¿ç§»é¡ºåºã€‚ä¾‹å¦‚ï¼š

```
{>1}->{count(<1,3)}->{==3}
```

![](doc/media/videos/300p60/complex_state_transition.gif)

è¿™ä¸ªè¡¨è¾¾å¼è¡¨ç¤ºï¼šå½“è¾“å…¥çš„æ•°æ®ä¾æ¬¡æ»¡è¶³"å¤§äº 1"ã€"ä¸‰æ¬¡ï¼ˆéè¿ç»­ï¼‰å°äº 1"ã€"ç­‰äº 3"æ—¶ï¼Œè¡¨è¾¾å¼æˆç«‹å¹¶è¿”å› trueã€‚

åªæœ‰å½“å‰ä¸€ä¸ªçŠ¶æ€æ»¡è¶³åï¼Œæ‰ä¼šç»§ç»­æ ¡éªŒä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚

### çŠ¶æ€è¡¨è¾¾å¼

èŠ±æ‹¬å·å†…çš„å†…å®¹ç§°ä¸ºçŠ¶æ€è¡¨è¾¾å¼æˆ–çŠ¶æ€æ–¹æ³•ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š

#### æ¯”è¾ƒè¡¨è¾¾å¼

ç”¨äºè¡¨ç¤ºæ•°æ®å€¼ä¹‹é—´çš„å¤§å°æ¯”è¾ƒï¼š

| è¡¨è¾¾å¼ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|
| `>` | å¤§äº | `count(>4,3)` è¡¨ç¤ºè‹¥å¹²æ•°æ®ä¸­æœ‰ä¸‰ä¸ªå¤§äº 4, `count(>4.5,3)` è¡¨ç¤ºè‹¥å¹²æµ®ç‚¹æ•°ä¸­æœ‰ä¸‰ä¸ªå¤§äº 4.5 |
| `<` | å°äº | `count(<4,3)` è¡¨ç¤ºè‹¥å¹²æ•°æ®ä¸­æœ‰ä¸‰ä¸ªå°äº 4, `count(<4.2,3)` è¡¨ç¤ºè‹¥å¹²æµ®ç‚¹æ•°ä¸­æœ‰ä¸‰ä¸ªå°äº 4.2 |
| `>=` | å¤§äºç­‰äº | `{>=0.5}->{<=0.8}` è¡¨ç¤ºæ•°æ®éœ€è¦å…ˆæ»¡è¶³å¤§äºç­‰äº 0.5 ç„¶åæ»¡è¶³å°äºç­‰äº 0.8 |
| `<=` | å°äºç­‰äº | `{<=5.5}->{>=2.1}` è¡¨ç¤ºæ•°æ®éœ€è¦å…ˆæ»¡è¶³å°äºç­‰äº 5.5 ç„¶åæ»¡è¶³å¤§äºç­‰äº 2.1 |
| `==` | ç­‰äº | `{==3.14}->{==0.0}` è¡¨ç¤ºæ•°æ®éœ€è¦å…ˆç­‰äº 3.14 ç„¶åç­‰äº 0.0 |
| `!=` | ä¸ç­‰äº | `{!=0.0}->{!=5.5}` è¡¨ç¤ºæ•°æ®éœ€è¦å…ˆä¸ç­‰äº 0.0 ç„¶åä¸ç­‰äº 5.5 |

#### åŒºé—´è¡¨è¾¾å¼

ç”¨äºè¡¨ç¤ºæ•°æ®å¤„äºæŸä¸ªèŒƒå›´å†…ï¼Œè¯­æ³•å€Ÿé‰´äº†æ•°å­¦ä¸­çš„åŒºé—´è¡¨ç¤ºæ³•ï¼š

| è¡¨è¾¾å¼ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|
| `(a,b)` | å¤§äº a ä¸”å°äº b | `(1,3)` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äº 1 ä¸”å°äº 3, `(1.5,3.5)` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äº 1.5 ä¸”å°äº 3.5 |
| `(a,b]` | å¤§äº a ä¸”å°äºç­‰äº b | `{(1,3]}->{(4,7)}` è¡¨ç¤ºæ•°æ®éœ€å…ˆæ»¡è¶³å¤§äº 1 ä¸”å°äºç­‰äº 3ï¼Œç„¶åæ»¡è¶³å¤§äº 4 å°äº 7 |
| `[a,b)` | å¤§äºç­‰äº a ä¸”å°äº b | `[1,3)` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äºç­‰äº 1 ä¸”å°äº 3, `[1.2,3.8)` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äºç­‰äº 1.2 ä¸”å°äº 3.8 |
| `[a,b]` | å¤§äºç­‰äº a ä¸”å°äºç­‰äº b | `[1,3]` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äºç­‰äº 1 ä¸”å°äºç­‰äº 3, `[0.5,2.5]` è¡¨ç¤ºæ•°æ®éœ€æ»¡è¶³å¤§äºç­‰äº 0.5 ä¸”å°äºç­‰äº 2.5 |

> ğŸ“Œ **æç¤º**ï¼šå·¦å³å°æ‹¬å·ï¼ˆ`()`ï¼‰è¡¨ç¤ºå¤§äº/å°äºï¼Œå·¦å³ä¸­æ‹¬å·ï¼ˆ`[]`ï¼‰è¡¨ç¤ºå¤§äºç­‰äº/å°äºç­‰äºã€‚

#### é€»è¾‘è¡¨è¾¾å¼

ç”¨äºç»„åˆå¤šä¸ªæ¡ä»¶ï¼ŒåŒ…æ‹¬ `||`ï¼ˆæˆ–ï¼‰ã€`&&`ï¼ˆä¸ï¼‰å’Œ `!`ï¼ˆéï¼‰ï¼š

- `||` æˆ–æ“ä½œï¼š`{==0||!=2}->{==1}` è¡¨ç¤ºæ•°æ®å…ˆæ»¡è¶³"ç­‰äº 0 æˆ–ä¸ç­‰äº 2"ï¼Œç„¶åæ»¡è¶³"ç­‰äº 1"

  ```java
  @Test
  void testOrOp() throws TranslatorException {
      String code = "{==0||!=2}->{==1}";
      Executor executor = Compiler.compile(code);
  
      EventData p1 = Util.genEventData("1", "3", new Timestamp(System.currentTimeMillis()));
      EventData p2 = Util.genEventData("2", "1", new Timestamp(System.currentTimeMillis()));
      Assertions.assertTrue(executor.execute(p1, p2)); // æ»¡è¶³è¯¥æ¡ä»¶
  }
  ```

- `&&` ä¸”æ“ä½œï¼š`{!=0&&!=2}->{==1}` è¡¨ç¤ºæ•°æ®å…ˆæ»¡è¶³"ä¸ç­‰äº 0 ä¸”ä¸ç­‰äº 2"ï¼Œç„¶åæ»¡è¶³"ç­‰äº 1"

- `!` éæ“ä½œï¼šä¸»è¦ç”¨äºä¸ç­‰äºè¡¨è¾¾å¼ï¼ˆ`!=`ï¼‰ä¸­

#### å‡½æ•°è¡¨è¾¾å¼

- **count! (ä¸¥æ ¼æ¨¡å¼è®¡æ•°)** ğŸ¯

  `count!` æ˜¯ `count` å‡½æ•°çš„ä¸¥æ ¼æ¨¡å¼ç‰ˆæœ¬ï¼Œç”¨äºæ£€æµ‹**è¿ç»­æ»¡è¶³æ¡ä»¶**çš„æ•°æ®ä¸ªæ•°ã€‚ä¸æ™®é€š `count` å‡½æ•°çš„åŒºåˆ«åœ¨äºï¼š

  - **count(æ¡ä»¶, n)**: ç»Ÿè®¡ **n ä¸ªéè¿ç»­** æ»¡è¶³æ¡ä»¶çš„æ•°æ®
  - **count!(æ¡ä»¶, n)**: ç»Ÿè®¡ **n ä¸ªè¿ç»­** æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰

  **åŸºæœ¬è¯­æ³•**ï¼š
  ```js
  count!(æ¡ä»¶, æ¬¡æ•°)
  ```

  **å·¥ä½œåŸç†**ï¼š

  - å½“æ•°æ®æ»¡è¶³æ¡ä»¶æ—¶ï¼Œè®¡æ•°å™¨é€’å¢
  - å½“æ•°æ®**ä¸æ»¡è¶³æ¡ä»¶**æ—¶ï¼Œè®¡æ•°å™¨**ç«‹å³é‡ç½®ä¸º 0**
  - åªæœ‰è¿ç»­æ»¡è¶³æ¡ä»¶è¾¾åˆ°æŒ‡å®šæ¬¡æ•°æ—¶ï¼Œå‡½æ•°æ‰è¿”å› true

  **ä½¿ç”¨ç¤ºä¾‹**ï¼š

  ```js
  // æ£€æµ‹è¿ç»­ 3 æ¬¡å¤§äº 4 çš„æ•°æ®
  count!(>4, 3)
  
  // æ£€æµ‹è¿ç»­ 2 æ¬¡å°äº 0 çš„æ•°æ®
  count!(<0, 2)
  
  // æ£€æµ‹è¿ç»­ 5 æ¬¡åœ¨èŒƒå›´ [10,20] å†…çš„æ•°æ®
  count!([10,20], 5)
  ```

  **å¯¹æ¯”ç¤ºä¾‹**ï¼š

  å‡è®¾æ•°æ®åºåˆ—ä¸ºï¼š`5, 2, 6, 1, 7, 8, 9`

  ```js
  // æ™®é€š count å‡½æ•°ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰
  count(>4, 3)
  // æ•°æ® 5: >4 âœ“ (è®¡æ•°=1)
  // æ•°æ® 2: â‰¤4 âœ— (è®¡æ•°ä¿æŒ=1)
  // æ•°æ® 6: >4 âœ“ (è®¡æ•°=2)
  // æ•°æ® 1: â‰¤4 âœ— (è®¡æ•°ä¿æŒ=2)
  // æ•°æ® 7: >4 âœ“ (è®¡æ•°=3) â†’ è¿”å› true
  
  // ä¸¥æ ¼æ¨¡å¼ count! å‡½æ•°
  count!(>4, 3)
  // æ•°æ® 5: >4 âœ“ (è®¡æ•°=1)
  // æ•°æ® 2: â‰¤4 âœ— (è®¡æ•°é‡ç½®=0) âš ï¸
  // æ•°æ® 6: >4 âœ“ (è®¡æ•°=1)
  // æ•°æ® 1: â‰¤4 âœ— (è®¡æ•°é‡ç½®=0) âš ï¸
  // æ•°æ® 7: >4 âœ“ (è®¡æ•°=1)
  // æ•°æ® 8: >4 âœ“ (è®¡æ•°=2)
  // æ•°æ® 9: >4 âœ“ (è®¡æ•°=3) â†’ è¿”å› true
  ```

  **å®é™…åº”ç”¨åœºæ™¯**ï¼š

  ```js
  // ç›‘æ§åœºæ™¯ï¼šæ£€æµ‹è¿ç»­ 3 æ¬¡æ¸©åº¦è¶…æ ‡
  count!(>80, 3)
  
  // è´¨é‡æ§åˆ¶ï¼šæ£€æµ‹è¿ç»­ 5 ä¸ªäº§å“åˆæ ¼
  count!([95,100], 5)
  
  // ç½‘ç»œç›‘æ§ï¼šæ£€æµ‹è¿ç»­ 2 æ¬¡å“åº”æ—¶é—´è¿‡é•¿
  count!(>1000, 2)
  
  // ç»„åˆä½¿ç”¨ï¼šè¿ç»­å¼‚å¸¸æˆ–å•æ¬¡ä¸¥é‡å¼‚å¸¸
  count!(>50, 3) || count(>100, 1)
  ```

  **ä¸çŠ¶æ€è¡¨è¾¾å¼ç»“åˆ**ï¼š

  ```js
  // çŠ¶æ€è½¬æ¢ï¼šæ­£å¸¸ â†’ è¿ç»­å¼‚å¸¸ â†’ æ¢å¤
  {count!(<10, 3)}->{count!(>50, 2)}->{<5}
  
  // å¤æ‚çŠ¶æ€æ£€æµ‹
  {==0}->{count!(>4, 3)}->{count!(<2, 2)}
  ```


### é“¾å¼è¡¨è¾¾å¼

é“¾å¼è¡¨è¾¾å¼ç”¨äºå¯¹å¤šä¸ªæ•°æ®çš„é›†åˆè¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ï¼š

```
filter((-5,5)).limit(5).take(0,2).sum().meet(>1)
```

è¿™ä¸ªè¡¨è¾¾å¼çš„åŠŸèƒ½å¦‚ä¸‹ï¼š

1. å½“æ•°æ®å¤„äº -5 åˆ° 5 ä¹‹é—´ä¼šè¢«æ”¶é›†åˆ°ä¸€ä¸ªé›†åˆä¸­
2. é›†åˆæœ€å¤§åªèƒ½å®¹çº³ 5 ä¸ªæ•°æ®ï¼Œæ–°çš„ä¼šæ›¿æ¢æ—§çš„ï¼ˆé˜Ÿåˆ—ç‰¹æ€§ï¼‰
3. æ¯æ¬¡å–å‰ä¸¤ä¸ªæ•°æ®ï¼ˆç´¢å¼•ä¸åŒ…å« 2ï¼Œæ•°æ®ä¸æ»¡è¶³ä¸¤ä¸ªåˆ™ä¸ç»§ç»­åç»­æ“ä½œï¼‰
4. å¯¹å–å‡ºçš„æ•°æ®æ±‚å’Œ
5. å½“ç»“æœå¤§äº 1 æ—¶è¡¨è¾¾å¼æˆç«‹ï¼Œè¿”å› true

> ğŸ” **é“¾å¼è¡¨è¾¾å¼çš„ç¼–å†™å¯ä»¥åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†**ï¼š
> 1. è¿‡æ»¤å‡ºæƒ³è¦çš„æ•°æ®
> 2. é™åˆ¶å‚ä¸è®¡ç®—çš„æ•°æ®çš„æ•°é‡ï¼ˆæ•°æ®ä¸ªæ•°æˆ–æ—¶é—´ï¼‰
> 3. è¿ç®—è§„åˆ™
> 4. ç¬¦åˆæ¡ä»¶

#### æ•°æ®è¿‡æ»¤

- **filter**

  filter å‡½æ•°æ”¾åœ¨é“¾å¼è¡¨è¾¾å¼çš„æœ€å‰é¢ï¼Œç”¨äºè¿‡æ»¤å‡ºæƒ³è¦çš„æ•°æ®ã€‚å¦‚æœä¸éœ€è¦è¿‡æ»¤æ•°æ®åˆ™å¯ä»¥ä¸å†™ã€‚filter å‡½æ•°å¯ä»¥ä¼ å…¥æ¯”è¾ƒè¡¨è¾¾å¼ã€åŒºé—´è¡¨è¾¾å¼ã€é€»è¾‘è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š

  ```
  filter(((1,7]||>10)&&!=5) // å¯ä»¥ä½¿ç”¨å°æ‹¬å·()æ¥æŒ‡å®šè¿ç®—ä¼˜å…ˆçº§
  filter(<=3)
  ```

> æç¤ºï¼šä¸ä½¿ç”¨filteræ—¶é»˜è®¤ä¸è¿‡æ»¤ä»»ä½•æ•°æ®

- **è‡ªå®šä¹‰filter** ğŸ”§

  é™¤äº†ä½¿ç”¨æ¯”è¾ƒè¡¨è¾¾å¼ã€åŒºé—´è¡¨è¾¾å¼å’Œé€»è¾‘è¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤å¤–ï¼ŒRhythmix è¿˜æ”¯æŒè‡ªå®šä¹‰è¿‡æ»¤å™¨å‡½æ•°ï¼ˆFilterUDFï¼‰ï¼Œè®©æ‚¨å¯ä»¥å®ç°å¤æ‚çš„è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘ã€‚

  **åˆ›å»ºè‡ªå®šä¹‰è¿‡æ»¤å™¨**ï¼š

  å®ç° `FilterUDF` æ¥å£æ¥åˆ›å»ºè‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼š

  ```java
  public class TemperatureFilterUDF implements FilterUDF {
      @Override
      public String getName() {
          return "tempFilter"; // è¿‡æ»¤å™¨åç§°ï¼Œç”¨äºè¡¨è¾¾å¼ä¸­è°ƒç”¨
      }
  
      @Override
      public boolean filter(EventData event) {
          try {
              double temp = Double.parseDouble(event.getValue());
              return temp >= 20.0 && temp <= 80.0; // ä¿ç•™20-80åº¦çš„æ¸©åº¦æ•°æ®
          } catch (NumberFormatException e) {
              return false; // ä¸¢å¼ƒæ— æ•ˆæ•°æ®
          }
      }
  }
  ```

  **åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨**ï¼š

  ```js
  // ä½¿ç”¨è‡ªå®šä¹‰æ¸©åº¦è¿‡æ»¤å™¨
  tempFilter().sum().meet(>100)
  ```
  
  **å†…ç½®ç¤ºä¾‹è¿‡æ»¤å™¨**ï¼š
  
  Rhythmix æä¾›äº†ä¸€äº›ç¤ºä¾‹å†…ç½®è¿‡æ»¤å™¨,ä½ å¯ä»¥å‚è€ƒè¿™ä¸ªæ¥ç¼–å†™è‡ªå·±çš„è¿‡æ»¤å™¨ï¼š
  
  | è¿‡æ»¤å™¨åç§° | åŠŸèƒ½æè¿° | ä½¿ç”¨ç¤ºä¾‹ |
  |-----------|----------|----------|
  | `numericFilter()` | ğŸ”¢ åªä¿ç•™æ•°å€¼ç±»å‹çš„æ•°æ® | `filter(numericFilter()).avg().meet(>10)` |
  | `positiveFilter()` | â• åªä¿ç•™æ­£æ•°å€¼çš„æ•°æ® | `filter(positiveFilter()).sum().meet(>0)` |
  
  **é«˜çº§åŠŸèƒ½ - æ‰¹é‡è¿‡æ»¤**ï¼š
  
  å¯¹äºéœ€è¦å¯¹æ•´ä¸ªæ•°æ®åˆ—è¡¨è¿›è¡Œå¤„ç†çš„åœºæ™¯ï¼Œå¯ä»¥é‡å†™ `filter(List<EventData>)` æ–¹æ³•ï¼š
  
  ```java
  public class ArrayFilterUDF implements FilterUDF {
      @Override
      public String getName() {
          return "arrayFilter";
      }
  
      @Override
      public List<EventData> filter(List<EventData> events) {
          // åªä¿ç•™æœ€å3ä¸ªæ•°æ®
          if (events.size() >= 3) {
              return events.subList(events.size() - 3, events.size());
          }
          return events;
      }
  }
  ```
  


#### æ•°æ®é™åˆ¶

- **limit** â±ï¸

  limit æ˜¯å¯¹å½“å‰è¡¨è¾¾å¼æœ€å¤šå­˜å‚¨æ•°æ®æ•°é‡çš„é™åˆ¶ï¼Œå¯ä»¥å¡«å†™æ—¶é—´æˆ–è€…ä¸ªæ•°ã€‚å¦‚æœè¶…å‡ºé™åˆ¶æ•°é‡åˆ™ä¼šæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åˆ é™¤æœ€æ—§çš„æ•°æ®

  ```
  limit(100ms) // âš¡ é™åˆ¶ 100 æ¯«ç§’å†…çš„æ•°æ®
  limit(10s)   // ğŸ• é™åˆ¶ 10 ç§’å†…çš„æ•°æ®  
  limit(1m)    // ğŸ•’ é™åˆ¶ 1 åˆ†é’Ÿå†…çš„æ•°æ®
  limit(1h)    // ğŸ•• é™åˆ¶ 1 å°æ—¶å†…çš„æ•°æ®
  limit(1d)    // ğŸ“… é™åˆ¶ 1 å¤©å†…çš„æ•°æ®
  limit(10)    // ğŸ“Š é™åˆ¶ 10 ä¸ªæ•°æ®
  ```

  > ğŸ’¡ **æç¤º**: è¯¥åŠŸèƒ½çš„è®¾è®¡æ˜¯ä¸ºäº†ç¡®ä¿åœ¨æç«¯æƒ…å†µä¸‹è¡¨è¾¾å¼æˆç«‹å¯¼è‡´æ•°æ®ç§¯ç´¯è¿‡å¤šå¼•èµ·ä¸å¿…è¦çš„å†…å­˜å ç”¨
  >
  > âš ï¸ **ä¸ window å‡½æ•°çš„ä½¿ç”¨é™åˆ¶**: ä¸å»ºè®®åŒæ—¶ä½¿ç”¨ limit å’Œ window å‡½æ•°ï¼Œè¯¦è§ [window å‡½æ•°è¯´æ˜](#æ•°æ®é™åˆ¶)



- **window** ğŸªŸ

  window å‡½æ•°ç”¨äºåˆ›å»ºæ»‘åŠ¨çª—å£ï¼Œé™åˆ¶å‚ä¸è®¡ç®—çš„æ•°æ®èŒƒå›´ã€‚å®ƒæ”¯æŒä¸¤ç§æ¨¡å¼ï¼šæ•°é‡çª—å£å’Œæ—¶é—´çª—å£ã€‚

  **æ•°é‡çª—å£**ï¼š
  ```
  window(2)    // ğŸ”¢ æ»‘åŠ¨çª—å£å¤§å°ä¸º 2 ä¸ªæ•°æ®
  window(5)    // ğŸ”¢ æ»‘åŠ¨çª—å£å¤§å°ä¸º 5 ä¸ªæ•°æ®
  window(10)   // ğŸ”¢ æ»‘åŠ¨çª—å£å¤§å°ä¸º 10 ä¸ªæ•°æ®
  ```

  **æ—¶é—´çª—å£**ï¼š

  ```
  window(100ms) // âš¡ 100 æ¯«ç§’æ—¶é—´çª—å£
  window(10s)   // ğŸ• 10 ç§’æ—¶é—´çª—å£
  window(1m)    // ğŸ•’ 1 åˆ†é’Ÿæ—¶é—´çª—å£
  window(1h)    // ğŸ•• 1 å°æ—¶æ—¶é—´çª—å£
  window(1d)    // ğŸ“… 1 å¤©æ—¶é—´çª—å£
  ```

  **ä½¿ç”¨ç¤ºä¾‹**ï¼š

  ```js
  // æ•°é‡çª—å£ç¤ºä¾‹ï¼šåªå¯¹æœ€è¿‘ 2 ä¸ªæ•°æ®æ±‚å’Œ
  filter((-5,5)).window(2).sum().meet(>1)
  
  // æ—¶é—´çª—å£ç¤ºä¾‹ï¼šåªå¯¹ 100 æ¯«ç§’å†…çš„æ•°æ®æ±‚å’Œ
  filter((-5,5)).window(100ms).sum().meet(>=7)
  ```

  > ğŸ’¡ **é‡è¦è¯´æ˜**:
  > - window å‚æ•°å¿…é¡»å¤§äº 0ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸
  > - æ•°é‡çª—å£ï¼šå½“æ•°æ®é‡è¾¾åˆ°æŒ‡å®šæ•°é‡æ—¶ï¼Œä¿ç•™æœ€æ–°çš„ N ä¸ªæ•°æ®
  > - æ—¶é—´çª—å£ï¼šåªä¿ç•™æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ•°æ®ï¼ŒåŸºäºæ•°æ®çš„æ—¶é—´æˆ³è®¡ç®—
  >
  > ğŸ”„ **è‡ªåŠ¨ limit å‡½æ•°æ·»åŠ **:
  > - å½“è¡¨è¾¾å¼ä¸­**åªæœ‰ window å‡½æ•°è€Œæ²¡æœ‰ limit å‡½æ•°**æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªä¸ window å‚æ•°ç›¸åŒçš„ limit å‡½æ•°
  > - è¿™ç¡®ä¿äº†æ•°æ®é˜Ÿåˆ—ç®¡ç†çš„ä¸€è‡´æ€§å’Œå†…å­˜ä½¿ç”¨çš„ä¼˜åŒ–
  >
  > **è‡ªåŠ¨æ·»åŠ ç¤ºä¾‹**ï¼š
  > ```js
  > // ç”¨æˆ·ç¼–å†™çš„è¡¨è¾¾å¼
  > filter(>0).window(5).sum().meet(>10)
  >
  > // ç³»ç»Ÿè‡ªåŠ¨è½¬æ¢ä¸º
  > filter(>0).limit(5).window(5).sum().meet(>10)
  > ```

  > âš ï¸ **limit å’Œ window å‡½æ•°ä½¿ç”¨é™åˆ¶**:
  > - **ä¸å»ºè®®æ‰‹åŠ¨åŒæ—¶ä½¿ç”¨** limit å’Œ window å‡½æ•°ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„å¤–çš„è¡Œä¸º
  > - å¦‚æœå¿…é¡»åŒæ—¶ä½¿ç”¨ï¼Œä¸¤è€…çš„å‚æ•°ç±»å‹å’Œæ•°å€¼å¿…é¡»å®Œå…¨ä¸€è‡´ï¼š
  >   - âœ… æ­£ç¡®ï¼š`limit(5).window(5)` æˆ– `limit(100ms).window(100ms)`
  >   - âŒ é”™è¯¯ï¼š`limit(5).window(3)` æˆ– `limit(100ms).window(200ms)`
  >   - âŒ é”™è¯¯ï¼š`limit(5).window(100ms)` ï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰
  > - æ¨èåšæ³•ï¼šåªä½¿ç”¨ window å‡½æ•°ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨æ·»åŠ åŒ¹é…çš„ limit å‡½æ•°

- **take**

  take å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºèµ·å§‹ç´¢å¼•ï¼ˆåŒ…å«ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºç»“æŸç´¢å¼•ï¼ˆä¸åŒ…å«ï¼‰ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºåˆ™é»˜è®¤å–åˆ°æœ€åä¸€ä¸ªå…ƒç´ ã€‚

  å‡è®¾å­˜åœ¨ä»¥ä¸‹åºåˆ—ï¼š`[0,1,2,3,4,5]`

  | è¡¨è¾¾å¼ | ç»“æœ |
  |-------|------|
  | `take(0,1)` | `[0]` |
  | `take(0,2)` | `[0,1]` |
  | `take(0,-1)` | `[0,1,2,3,4]` |
  | `take(-3,-1)` | `[3,4]` |
  | `take(-3)` | `[3,4,5]` |
  | `take(0)` | `[0,1,2,3,4,5]` |
#### æ•°æ®è®¡ç®—
Rhythmix æä¾›äº†å¤šç§æ•°æ®è®¡ç®—å‡½æ•°,ç”¨äºå¯¹æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æ:

- **sum**

  è®¡ç®—æ•°æ®åºåˆ—çš„æ€»å’Œã€‚æ”¯æŒæ•´æ•°å’Œæµ®ç‚¹æ•°çš„è®¡ç®—ã€‚

  ```js
  // æ•´æ•°åºåˆ— [10, 7, 10], sum() å°†è¿”å› 27
  filter(>0).sum()
  
  // æµ®ç‚¹æ•°åºåˆ— [10.5, 7.3, 10.2], sum() å°†è¿”å› 28.0
  filter(>0).sum()
  ```

- **avg** 

  è®¡ç®—æ•°æ®åºåˆ—çš„å¹³å‡å€¼ã€‚

  ```js
  // æ•´æ•°åºåˆ— [10, 7, 10], avg() å°†è¿”å› 9.0
  filter(>0).avg()
  
  // æµ®ç‚¹æ•°åºåˆ— [10.5, 7.3, 10.2], avg() å°†è¿”å› 9.33
  filter(>0).avg()
  ```

- **count**

  ç»Ÿè®¡æ•°æ®åºåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚

  ```js
  // æ•´æ•°åºåˆ— [10, 7, 10], count() å°†è¿”å› 3
  filter(>0).count()
  
  // æµ®ç‚¹æ•°åºåˆ— [10.5, 7.3, 10.2], count() å°†è¿”å› 3
  filter(>0).count()
  ```


- **stddev**

  è®¡ç®—æ•°æ®åºåˆ—çš„æ ‡å‡†å·®ã€‚éœ€è¦è‡³å°‘ä¸¤ä¸ªæ•°æ®ç‚¹æ‰èƒ½è®¡ç®—ã€‚ç»“æœä¿ç•™3ä½å°æ•°ã€‚

  ```js
  // æ•´æ•°åºåˆ— [10, 7, 10], stddev() å°†è¿”å› 1.414
  filter(>0).stddev()
  
  // æµ®ç‚¹æ•°åºåˆ— [10.5, 7.3, 10.2], stddev() å°†è¿”å› 1.473
  filter(>0).stddev()
  ```

> ğŸ’¡ **æ³¨æ„**:
>
> - æ‰€æœ‰è®¡ç®—å‡½æ•°éƒ½ä¼šè‡ªåŠ¨å¿½ç•¥ç©ºå€¼
> - å¯¹äºéæ•°å€¼ç±»å‹çš„æ•°æ®å°†æŠ›å‡ºè®¡ç®—å¼‚å¸¸
> - æ ‡å‡†å·®è®¡ç®—è‡³å°‘éœ€è¦2ä¸ªæ•°æ®ç‚¹
> - å½“è¾“å…¥åºåˆ—åŒ…å«æµ®ç‚¹æ•°æ—¶,è®¡ç®—ç»“æœä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæµ®ç‚¹æ•°ç±»å‹

- **è‡ªå®šä¹‰è®¡ç®—å‡½æ•°** ğŸ§®

  é™¤äº†ä½¿ç”¨å†…ç½®çš„è®¡ç®—å‡½æ•°å¤–ï¼ŒRhythmix è¿˜æ”¯æŒè‡ªå®šä¹‰è®¡ç®—å™¨å‡½æ•°ï¼ˆCalculatorUDFï¼‰ï¼Œè®©æ‚¨å¯ä»¥å®ç°å¤æ‚çš„è‡ªå®šä¹‰è®¡ç®—é€»è¾‘ã€‚

  **åˆ›å»ºè‡ªå®šä¹‰è®¡ç®—å™¨**ï¼š

  å®ç° `CalculatorUDF` æ¥å£æ¥åˆ›å»ºè‡ªå®šä¹‰è®¡ç®—å™¨ï¼š

  ```java
  public class MyMaxCalculator implements CalculatorUDF {
      @Override
      public String getName() {
          return "myMax"; // è®¡ç®—å™¨åç§°ï¼Œç”¨äºè¡¨è¾¾å¼ä¸­è°ƒç”¨
      }
  
      @Override
      public Number calculate(List<EventData> values) {
          // è‡ªå®šä¹‰è®¡ç®—é€»è¾‘ï¼šæ‰¾å‡ºæœ€å¤§å€¼
          if (values == null || values.isEmpty()) {
              return 0;
          }
  
          double max = Double.NEGATIVE_INFINITY;
          boolean hasValidNumber = false;
  
          for (EventData eventData : values) {
              if (eventData == null || eventData.getValue() == null) {
                  continue;
              }
  
              try {
                  double num;
                  Object value = eventData.getValue();
                  if (value instanceof Number) {
                      num = ((Number) value).doubleValue();
                  } else {
                      num = Double.parseDouble(value.toString());
                  }
  
                  if (!Double.isNaN(num) && num > max) {
                      max = num;
                  }
                  hasValidNumber = true;
              } catch (NumberFormatException e) {
                  // è·³è¿‡éæ•°å€¼ç±»å‹çš„æ•°æ®
                  continue;
              }
          }
  
          return hasValidNumber ? (max == Math.floor(max) ? (long) max : max) : 0;
      }
  }
  ```

  **åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨**ï¼š

  ```js
  // ä½¿ç”¨è‡ªå®šä¹‰æœ€å¤§å€¼è®¡ç®—å™¨
  filter(>0).limit(5).myMax().meet(>10)
  
  // å¤æ‚é“¾å¼è¡¨è¾¾å¼ç¤ºä¾‹
  filter((-100,100)).window(10).myMax().meet(>=50)
  ```

  **å†…ç½®ç¤ºä¾‹è®¡ç®—å™¨**ï¼š

  Rhythmix æä¾›äº†ä¸€äº›ç¤ºä¾‹å†…ç½®è®¡ç®—å™¨ï¼Œä½ å¯ä»¥å‚è€ƒè¿™äº›æ¥ç¼–å†™è‡ªå·±çš„è®¡ç®—å™¨ï¼š

  | è®¡ç®—å™¨åç§° | åŠŸèƒ½æè¿° | ä½¿ç”¨ç¤ºä¾‹ |
  |-----------|----------|----------|
  | `maxCalc()` | ğŸ“ˆ æ‰¾å‡ºæ•°æ®åºåˆ—çš„æœ€å¤§å€¼ | `filter(>0).maxCalc().meet(>100)` |
  | `minCalc()` | ğŸ“‰ æ‰¾å‡ºæ•°æ®åºåˆ—çš„æœ€å°å€¼ | `filter(>0).minCalc().meet(<10)` |


> ğŸ’¡ **æ³¨æ„**:
> - **è‡ªå®šä¹‰è®¡ç®—å™¨**ä¼šè‡ªåŠ¨è¢«ç³»ç»Ÿå‘ç°å’Œæ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œ
> - è®¡ç®—å™¨åç§°å¿…é¡»å”¯ä¸€ï¼Œé‡å¤åç§°ä¼šå¯¼è‡´æ³¨å†Œå¤±è´¥
> - è‡ªå®šä¹‰è®¡ç®—å™¨åº”è¯¥å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œé¿å…å½±å“æ•´ä¸ªè¡¨è¾¾å¼çš„æ‰§è¡Œ

#### æ¡ä»¶åˆ¤æ–­

æ¡ä»¶åˆ¤æ–­å‡½æ•°ç”¨äºå¯¹è®¡ç®—ç»“æœè¿›è¡Œæœ€ç»ˆçš„æ¡ä»¶éªŒè¯ï¼Œé€šå¸¸ä½äºé“¾å¼è¡¨è¾¾å¼çš„æœ«å°¾ã€‚

- **å†…ç½®æ¡ä»¶åˆ¤æ–­å‡½æ•°** ğŸ¯

  Rhythmix æä¾›äº†å¤šç§å†…ç½®çš„æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼Œç”¨äºéªŒè¯è®¡ç®—ç»“æœæ˜¯å¦æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼š

  | å‡½æ•°åç§° | åŠŸèƒ½æè¿° | åˆ¤æ–­æ¡ä»¶ | ä½¿ç”¨ç¤ºä¾‹ |
  |---------|----------|----------|----------|
  | `meet(æ¡ä»¶)` | ğŸ¯ åŸºç¡€æ¡ä»¶åˆ¤æ–­ | æ”¯æŒå„ç§æ¯”è¾ƒæ“ä½œç¬¦ | `filter(>0).sum().meet(>10)` |
  | `thresholdMeet()` | ğŸ“Š é˜ˆå€¼åˆ¤æ–­ | å€¼ >= 10 | `filter(>0).avg().thresholdMeet()` |
  | `rangeMeet()` | ğŸ“ èŒƒå›´åˆ¤æ–­ | 5 <= å€¼ <= 50 | `filter(>0).count().rangeMeet()` |
  | `positiveMeet()` | â• æ­£æ•°åˆ¤æ–­ | å€¼ > 0 | `filter(>-100).sum().positiveMeet()` |
  | `evenMeet()` | ğŸ”¢ å¶æ•°åˆ¤æ–­ | å€¼ä¸ºå¶æ•°æ•´æ•° | `filter(>0).count().evenMeet()` |

- **åŸºç¡€ meet() å‡½æ•°** ğŸ¯

  `meet()` å‡½æ•°æ˜¯æœ€åŸºç¡€å’Œçµæ´»çš„æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼Œæ”¯æŒå¤šç§æ¯”è¾ƒæ“ä½œï¼š

  ```js
  // å¤§äºåˆ¤æ–­
  filter(>0).sum().meet(>100)

  // å°äºåˆ¤æ–­
  filter(>0).avg().meet(<50)

  // ç­‰äºåˆ¤æ–­
  filter(>0).count().meet(==5)

  // èŒƒå›´åˆ¤æ–­
  filter(>0).sum().meet([10,100])

  // ä¸ç­‰äºåˆ¤æ–­
  filter(>0).avg().meet(!=0)

  // å¤§äºç­‰äºåˆ¤æ–­
  filter(>0).sum().meet(>=10)

  // å°äºç­‰äºåˆ¤æ–­
  filter(>0).avg().meet(<=50)
  ```

- **è‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°** ğŸ§©

  é™¤äº†ä½¿ç”¨å†…ç½®çš„æ¡ä»¶åˆ¤æ–­å‡½æ•°å¤–ï¼ŒRhythmix è¿˜æ”¯æŒè‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼ˆMeetUDFï¼‰ï¼Œè®©æ‚¨å¯ä»¥å®ç°å¤æ‚çš„è‡ªå®šä¹‰åˆ¤æ–­é€»è¾‘ã€‚

  **åˆ›å»ºè‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°**ï¼š

  å®ç° `MeetUDF` æ¥å£æ¥åˆ›å»ºè‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼š

  ```java
  public class CustomThresholdMeetUDF implements MeetUDF {
      @Override
      public String getName() {
          return "customThresholdMeet"; // å‡½æ•°åç§°ï¼Œç”¨äºè¡¨è¾¾å¼ä¸­è°ƒç”¨
      }
  
      @Override
      public boolean meet(Number calculatedValue) {
          // è‡ªå®šä¹‰åˆ¤æ–­é€»è¾‘ï¼šæ£€æŸ¥å€¼æ˜¯å¦å¤§äº 15
          if (calculatedValue == null) {
              return false;
          }
  
          try {
              double numericValue = calculatedValue.doubleValue();
              return numericValue > 15.0; // è‡ªå®šä¹‰é˜ˆå€¼æ¡ä»¶
          } catch (Exception e) {
              return false;
          }
      }
  
      @Override
      public String getDescription() {
          return "æ£€æŸ¥è®¡ç®—å€¼æ˜¯å¦å¤§äº 15";
      }
  }
  ```

  **åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨**ï¼š

  ```js
  // ä½¿ç”¨è‡ªå®šä¹‰é˜ˆå€¼åˆ¤æ–­å‡½æ•°
  filter(>0).sum().customThresholdMeet()
  
  // å¤æ‚é“¾å¼è¡¨è¾¾å¼ç¤ºä¾‹
  filter((-100,100)).window(10).avg().customThresholdMeet()
  ```

  **å†…ç½®ç¤ºä¾‹æ¡ä»¶åˆ¤æ–­å‡½æ•°**ï¼š

  Rhythmix æä¾›äº†ä¸€äº›ç¤ºä¾‹å†…ç½®æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼Œä½ å¯ä»¥å‚è€ƒè¿™äº›æ¥ç¼–å†™è‡ªå·±çš„åˆ¤æ–­å‡½æ•°ï¼š

  | å‡½æ•°åç§° | åŠŸèƒ½æè¿° | åˆ¤æ–­æ¡ä»¶ | ä½¿ç”¨ç¤ºä¾‹ |
  |---------|----------|----------|----------|
  | `thresholdMeet()` | ğŸ“Š é˜ˆå€¼åˆ¤æ–­ | å€¼ >= 10.0 | `filter(>0).sum().thresholdMeet()` |
  | `rangeMeet()` | ğŸ“ èŒƒå›´åˆ¤æ–­ | 5.0 <= å€¼ <= 50.0 | `filter(>0).avg().rangeMeet()` |
  | `positiveMeet()` | â• æ­£æ•°åˆ¤æ–­ | å€¼ > 0.0 | `filter(>-100).sum().positiveMeet()` |
  | `evenMeet()` | ğŸ”¢ å¶æ•°åˆ¤æ–­ | å€¼ä¸ºå¶æ•°æ•´æ•° | `filter(>0).count().evenMeet()` |

  **é«˜çº§åŠŸèƒ½ - å¤æ‚åˆ¤æ–­é€»è¾‘**ï¼š

  è‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°å¯ä»¥å®ç°ä»»æ„å¤æ‚çš„åˆ¤æ–­é€»è¾‘ï¼š

  ```java
  public class MultiConditionMeetUDF implements MeetUDF {
      @Override
      public String getName() {
          return "multiConditionMeet";
      }
  
      @Override
      public boolean meet(Number calculatedValue) {
          if (calculatedValue == null) {
              return false;
          }
  
          try {
              double value = calculatedValue.doubleValue();
  
              // å¤æ‚çš„å¤šæ¡ä»¶åˆ¤æ–­é€»è¾‘
              if (value >= 0 && value <= 10) {
                  return value % 2 == 0; // 0-10èŒƒå›´å†…å¿…é¡»æ˜¯å¶æ•°
              } else if (value > 10 && value <= 100) {
                  return value > 50; // 10-100èŒƒå›´å†…å¿…é¡»å¤§äº50
              } else {
                  return value < 0; // å…¶ä»–æƒ…å†µå¿…é¡»æ˜¯è´Ÿæ•°
              }
          } catch (Exception e) {
              return false;
          }
      }
  }
  ```

  **ä½¿ç”¨ç¤ºä¾‹**ï¼š

  ```js
  // å¤šæ¡ä»¶åˆ¤æ–­ç¤ºä¾‹
  filter(>0).limit(10).sum().multiConditionMeet()
  
  // ä¸å…¶ä»–å‡½æ•°ç»„åˆä½¿ç”¨
  filter([0,200]).window(5).avg().multiConditionMeet()
  
  // å¤æ‚é“¾å¼è¡¨è¾¾å¼
  filter(>0).limit(20).window(10).sum().multiConditionMeet()
  ```

> ğŸ’¡ **é‡è¦è¯´æ˜**:
> - **è‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­å‡½æ•°**ä¼šè‡ªåŠ¨è¢«ç³»ç»Ÿå‘ç°å’Œæ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œ
> - å‡½æ•°åç§°å¿…é¡»å”¯ä¸€ï¼Œé‡å¤åç§°ä¼šå¯¼è‡´æ³¨å†Œå¤±è´¥
> - æ¡ä»¶åˆ¤æ–­å‡½æ•°åº”è¯¥å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œé¿å…å½±å“æ•´ä¸ªè¡¨è¾¾å¼çš„æ‰§è¡Œ
> - æ¡ä»¶åˆ¤æ–­å‡½æ•°é€šå¸¸ä½äºé“¾å¼è¡¨è¾¾å¼çš„æœ«å°¾ï¼Œç”¨äºæœ€ç»ˆçš„ç»“æœéªŒè¯
> - å†…ç½®å‡½æ•°æä¾›äº†å¸¸ç”¨çš„åˆ¤æ–­é€»è¾‘ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ— éœ€é¢å¤–é…ç½®


---
